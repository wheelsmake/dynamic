(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{register:()=>O});var n={};e.r(n),e.d(n,{getHash:()=>N,getSearch:()=>A});var o={};function r(e,t,n,o){throw e===undefined?new Error("An error occured."):(console.error("ERROR INFO: argument",e,",type",t,",value",n,",reason",o),new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${o?`, reason: ${o}`:""}${n?`, got ${n}`:""}.`))}function l(e){throw new Error(e)}function i(e){return Array.from(new Set(e))}function s(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function a(e){""!==e&&"string"==typeof e||r("HTML","string",e);const t=document.createElement("div");return t.innerHTML=e,function(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t}(t)}e.r(o),e.d(o,{add:()=>S});undefined&&undefined.__classPrivateFieldGet,undefined&&undefined.__classPrivateFieldSet;clearInterval;new WeakMap;const c=Function.prototype.toString;function u(e,t,n,o){const r=t.shouldExports;f(n);let l=!1;for(let i=0;i<r.length;i++)if(r[i][0]===n){l=!0;break}if(l)console.warn("Duplicated function",n,"is blocked being added to data",t);else{const l=[n,o,!1];r.push(l),n.call(e,l,t.value)}return[...r]}function f(e){c.call(e).match(/^\([^\(\)]*\)[\s]*=>/)&&r("func",undefined,e,"this function must not be an arrow function")}const d=Object.prototype.toString;function g(e){if("object"!=typeof e&&r("input","object",e),null===e)return"null";{let t="{";const n=Object.keys(e),o=h(e);if(0==n.length)return"[object Object]"!=o?o:"{}";{const l=function(e){const t=new WeakMap;return function n(e,o){if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;{const r=t.get(e);if(r!==undefined&&-1!=o.indexOf(r))return{$ref:r};if(t.set(e,o),e instanceof Array){const t=[];for(let r=0;r<e.length;r++)t[r]=n(e[r],o+"["+r+"]");return t}{const t={},r=Object.keys(e);if(0!=r.length)for(let l=0;l<r.length;l++)t[r[l]]=n(e[r[l]],o+"["+JSON.stringify(r[l])+"]");else if("[object Object]"!=h(e))return e;return t}}}(e,"$")}(e);for(let i=0;i<n.length;i++){const s=n[i],a=l[s],c=typeof a;function u(e){t+=`${s}: ${e}`}"undefined"==c||"number"==c||"boolean"==c?u(a):"string"==c?u(`"${a}"`):"bigint"==c?u(a+"n"):"symbol"==c?u(a.toString()):"function"==c?u(h(a)):"object"==c&&u(g(a)),i<n.length-1&&(t+=", ")}return t+="}",t}}}function h(e){return"toString"in e?e.toString():d.call(e)}const p="2.2.0",b={l:"_:",r:":_"},m={l:"_-",r:"-_"},y=":",v=new RegExp(`^${b.l}[a-zA-Z$_][\\w$]*${b.r}$`),$=new RegExp(`^${m.l}[a-zA-Z$_][\\w$]*${m.r}$`),w=new RegExp(`${b.l}[a-zA-Z$_][\\w$]*${b.r}`,"g"),E=new RegExp(`${m.l}[a-zA-Z$_][\\w$]*${m.r}`,"g"),x=["鬼片出现了！","",", automatically treated as one-way binding.","function","DO NOT USE "," in Dynamic instance."," is a reserved property."];function O(){}function A(){var e=location.search;if(""!=e){e=e.substring(1);const t={};return e.split("&").forEach((e=>{const n=e.split("=");t[n[0]]=n[1]})),t}return null}function N(){return location.hash.substring(1)}function S(){}const j=function(e,t){const n=function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=s(e);if(t instanceof Node)return t;r("rootNode","string | Element",e,"rootNode should be a VALID #id selector")}else r("rootNode","string | Element",e,"rootNode should be a #id selector or an Element")}(e),o={},a={rootNode:n,hydrate:k,addExport:function(){},removeExport:function(){},getExports:function(){},connect:function(){},disConnect:function(){},getDataKeys:function(){return Object.keys(o)}},c=["length","name","prototype","arguments","caller"],d=(new WeakMap,Symbol()),h={[d]:function(){}},O=new WeakMap,A=new WeakMap,N=new WeakMap,S=new MutationObserver((e=>{for(let t=0;t<e.length;t++){const n=e[t],o=n.type;"attributes"==o&&O.has(n.target)?O.get(n.target)(n):"characterData"==o&&A.has(n.target)?A.get(n.target)(n):"childList"==o&&N.has(n.target)&&N.get(n.target)(n)}}));for(let r in a)h[d][r]=a[r];const j=new Proxy(h[d],{get(e,t,n){return t in a?a[t]:t in o?typeof o[t].value==x[3]?o[t].cache:o[t].value:undefined},set(e,t,n,r){if(t in a)l(`${t}${x[6]}`);else if(t in o){const u=o[t].value;if(u!==n||typeof n==x[3]){o[t].value=n,s(o[t]);const d=o[t].shouldExports;for(let h=0;h<d.length;h++)d[h][0].call(r,d[h],u);for(let p=0;p<o[t].shouldUpdates.length;p++)g(o[t].shouldUpdates[p]);function g(e){if(e in o&&typeof o[e].value==x[3]){const t=o[e].cache;o[e].cache=o[e].value.call(r);const n=o[e].shouldExports;for(let e=0;e<n.length;e++)n[e][0].call(r,n[e],t);for(let r=0;r<o[e].shouldUpdates.length;r++)g(o[e].shouldUpdates[r])}}}}else o[t]=function(e,t,n){const o={value:e,shouldUpdates:t||[],shouldExports:n||[]};return"function"==typeof o.value&&(o.cache=undefined),o}(n),s(o[t]);return!0;function s(l){if(typeof n==x[3]){f(n),l.cache=n.call(r);const s=function(e){const t={double:!1,single:!1,reversed:!1},n=[];var o=0;for(let r=0;r<e.length;r++)"\\n"==e[r]&&(t.double=!1,t.single=!1),"`"!=e[r]||t.single||t.double||(t.reversed=!t.reversed),'"'!=e[r]||t.single||t.reversed||(t.double=!t.double),"'"!=e[r]||t.double||t.reversed||(t.single=!t.single),e[r].match(/[\w$]/)||0==o||t.single||t.double||t.reversed||(n.push(e.substring(o,r)),o=0),t.single||t.double||t.reversed||"t"!=e[r]||"h"!=e[r+1]||"i"!=e[r+2]||"s"!=e[r+3]||"."!=e[r+4]||(o=r+5,r+=4);return i(n)}(Function.prototype.toString.call(n));for(let e=0;e<s.length;e++)s[e]in o||(r[s[e]]=undefined),-1==o[s[e]].shouldUpdates.indexOf(t)&&o[s[e]].shouldUpdates.push(t);-1==c.indexOf(t)&&(e[t]=l.cache)}else delete l.cache,-1==c.indexOf(t)&&(e[t]=l.value)}},deleteProperty(e,t){const n=t in o;return t in a?l(`${t}${x[6]}`):n&&(delete o[t],delete e[t]),n},apply(e,t,n){1==n.length&&n[0]in o&&"cache"in o[n[0]]?j[n[0]]=o[n[0]].value:n.length},construct(e,t,n){return{version:p}},has(e,t){return Reflect.has(o,t)},getOwnPropertyDescriptor(e,t){return t in o?Reflect.getOwnPropertyDescriptor(o,t):Reflect.getOwnPropertyDescriptor(e,t)},ownKeys(e){return i([...Reflect.ownKeys(o),"prototype","caller","arguments","length","name"])},isExtensible(){return!0},defineProperty(){return l(`${x[4]}defineProperty${x[5]}`),!1},preventExtensions(){return l(`${x[4]}preventExtensions${x[5]}`),!1},setPrototypeOf(){return l(`${x[4]}setPrototypeOf${x[5]}`),!1}});function k(e){if(e instanceof Element){const t=Array.from(e.attributes),n=Array.from(e.childNodes),r=[];for(let l=0;l<t.length;l++){let n=t[l].name,i=t[l].value;const s=!!n.match($),a=!!n.match(v),c=!!i.match($),f=!!i.match(v),d=s||a,g=c||f;let h,p,b,w;if(a&&console.warn(`It's not rational to declare a two-way binding attribute name: ${n}${x[2]} Use "${m.l}${n.substring(2,n.length-2)}${m.r}" instead.`),d&&g&&console.warn("Cannot set an attribute with both name and value dynamic. Dynamic will make only attribute name dynamic."),d){h=n.substring(2,n.length-2);const t=Symbol(),r={[t]:function(e,t){const n=this[h];if(t!==n){const o=e[1],r=o.getAttribute(t);o.removeAttribute(t),""!==n&&("string"==typeof n&&n!==n.toLowerCase()&&console.warn(`Attribute names are case insensitive, don't pass string with upper-case letters which may cause bugs: ${n}`),o.setAttribute(n,r))}}};h in j||(j[h]=undefined),u(j,o[h],r[t],e)}else if(g){p=i.substring(2,i.length-2),b=n[n.length-1]==y?n.substring(0,n.length-1):n;let t={};("value"==b||"checked"==b)&&e instanceof HTMLInputElement&&b in e?t.func=function(t,n){const o=this[p];n!==o&&(e[b]=o)}:(w=e instanceof HTMLInputElement?"defaultvalue"==b&&"defaultValue"in e?"value":"defaultchecked"==b&&"defaultChecked"in e?"checked":b:b,t.func=function(t,n){const o=this[p];n!==o&&(null===o?e.removeAttribute(w):e.setAttribute(w,o))}),p in j||(j[p]=undefined),u(j,o[p],t.func,e),f&&(e instanceof HTMLInputElement?"value"==n?e.addEventListener("input",(t=>{t.target===e&&(j[p]=e.value)})):"checked"==n&&e.addEventListener("input",(t=>{t.target===e&&(j[p]=e.checked)})):O.set(e,(e=>{e.attributeName===w&&e.target.getAttribute(e.attributeName)!==j[p]&&(j[p]=e.target.getAttribute(e.attributeName))})))}d?r.push([1,n,h,i]):g&&r.push([2,n,w,p])}for(let o=0;o<r.length;o++){const t=r[o];1==t[0]?(e.removeAttribute(t[1]),e.setAttribute(j[t[2]],t[3])):2==t[0]&&(t[2]===undefined?e[t[1]]=j[t[3]]:(e.removeAttribute(t[1]),e.setAttribute(t[2],j[t[3]])))}for(let e=0;e<n.length;e++)k(n[e])}else if(e instanceof Text)if(null!==function(e){const t=e.textContent,n=t.replace(/\n\s*/g,""),o=e.parentElement,r=document.designMode;return null!==o&&"TEXTAREA"==o.tagName||o instanceof HTMLElement&&o.isContentEditable||"on"==r||"ON"==r?t:""===n?(e.remove(),null):n!==t?(e.textContent=t.replace(/\n\s*/g," "),e.textContent):t}(e)&&e.textContent){const t=e.textContent,n=[...t.matchAll(w)],r=[...t.matchAll(E),...n],l=!!t.match(v);t.match($);if(n.length>0&&!l&&console.warn(`Two-way bindings in "${t}" cannot be used in textContent template${x[2]}`),l){e.parentElement instanceof HTMLElement||console.warn("It's no use adding a two-way binding to an SVGElement but dynamic will continue.");const n=t.substring(2,t.length-2),r=e.parentNode;if(1==r.childNodes.length){const t=Symbol(),l={[t]:function(){}};n in j||(j[n]=undefined),u(j,o[n],l[t],e),r.addEventListener("input",(e=>{e.target===r&&r.textContent!==j[n]&&(j[n]=r.textContent)})),e.textContent=j[n]}else console.error("The parent element of a two-way binding text node must only have this text node.")}else if(r.length>0){const n=e.parentNode,l=e.nextSibling,s=(()=>{const e=[];for(let t=0;t<r.length;t++){const n=r[t][0].substring(2,r[t][0].length-2);e.push(n),n in o||(j[n]=undefined)}return i(e)})(),a=Symbol();if(r.length=1){const t=s[1],r={[a]:function(e){let o=this[t];n.innerHTML=o}};for(let n=0;n<s.length;n++)u(j,o[s[n]],r[a],e)}else{const r={[a]:function(e){let o=t;document.contains(e[1])||(e[1]=document.createTextNode(o),n.insertBefore(e[1],l));let r=e[1];for(let t=0;t<s.length;t++){let e=this[s[t]];"object"==typeof e&&(e=g(e)),o=o.replaceAll(`${m.l}${s[t]}${m.r}`,e).replaceAll(`${b.l}${s[t]}${b.r}`,e)}r.textContent!==o&&(r.textContent=o)}};for(let t=0;t<s.length;t++)u(j,o[s[t]],r[a],e)}}}else e.remove()}return k(n),S.observe(n,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),j};j.template=t,j.spa=n,j.manifest=o,j.e=s,j.render=e=>function(e,t,n,o){null===t.parentElement&&l("cannot render by '<html>' element, since it's root of document.");var r=[];if("string"==typeof e)r=a(e);else if(e instanceof Element||e instanceof Node)r[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let l=0;l<e.length;l++)r[l]=e.item(l).cloneNode(!0);else r=e;const i=[...r].reverse(),s=t.parentElement;if(!0===o)for(let l=0;l<r.length;l++)t.append(r[l]);else if(!1===o)for(let l=0;l<i.length;l++)t.prepend(i[l]);else if(!0===n)if(t.nextSibling)for(let l=0;l<i.length;l++)s.insertBefore(i[l],t.nextSibling);else for(let l=0;l<i.length;l++)s.append(i[l]);else if(!1===n)for(let l=0;l<r.length;l++)s.insertBefore(r[l],t);else for(let l=0;l<r.length;l++)t.append(r[l]);return r}(e.HTML,e.element,e.insertAfter,e.append),j.toHTML=a,j.hatch=function(e,t){const n=e.parentElement,o=Array.from(e.childNodes);for(let r=0;r<o.length;r++)n.insertBefore(o[r],e);return!0===t&&e.remove(),o},j.compose=()=>{};const k=j;!function T(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&T(e[Object.keys(e)[t]])}(k);const M=k;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:M})})();
//# sourceMappingURL=dynamic.min.js.map