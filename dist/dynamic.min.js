(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addExport:()=>c,createData:()=>l,isComputedProperty:()=>f,pushCache:()=>d,removeExport:()=>u});var n={};e.r(n),e.d(n,{getHash:()=>p,getSearch:()=>h});var r={};function o(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function i(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)[0]}function s(e,t,n,r){throw e===undefined?new Error("An error occured."):(console.error("ERROR INFO: argument",e,",type",t,",value",n,",reason",r),new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`))}function a(e){return"symbol"==typeof e&&s(e.toString(),"string",e,"index of Dynamic.data must not be a Symbol"),e}function l(e,t,n){const r={value:e,deleted:!1,shouldUpdates:t||[],shouldExports:n||[]};return f(r)&&(r.cache=undefined),r}function c(e,t){const n=e.shouldExports;return t.toString().match(/^\([^\(\)]*\)[\s]*=>/)&&s("func","exportFunc",t,"export function must not be an arrow function"),-1==n.indexOf(t)?n.push(t):console.warn("Duplicated function",t,"is blocked being added to data",e),n}function u(e,t){const n=e.shouldExports;if("string"==typeof t)if("__addedByDynamic__"==t)s("func","string | exportFunc",t,"this name is reserved");else if(""==t)console.warn("Operation blocked trying to remove ALL annoymous functions. Use the function itself for argument instead.");else for(let r=0;r<n.length;r++)n[r].name===t&&i(n[r],n);else"function"==typeof t?i(t,n):s("func","string | exportFunc",t);return n}function f(e){return"function"==typeof e.value}function d(){}function h(){var e=location.search;if(""!=e){e=e.substring(1);const t={};return e.split("&").forEach((e=>{const n=e.split("=");t[n[0]]=n[1]})),t}return null}function p(){}function g(){}e.r(r),e.d(r,{add:()=>g});var m,b,y,w,v,_=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},E=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const x="__dn_DEV__"in window&&!0===window.__dn_DEV__&&!0,O=["鬼片出现了！","Access to deleted property was blocked: "];class ${constructor(e){m.add(this),b.set(this,void 0),y.set(this,{}),w.set(this,void 0),_(this,b,function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=o(e);if(t instanceof Node)return t;s("rootNode","string | Element",e,"rootNode should be a VALID #id selector")}else s("rootNode","string | Element",e,"rootNode should be a #id selector or an Element")}(e),"f"),_(this,w,new Proxy(E(this,y,"f"),{get(e,t,n){if((t=a(t))in e&&!e[t].deleted){var r;if("object"==typeof(r="function"==typeof e[t].value?e[t].value.bind(n)():e[t].value))try{r=JSON.stringify(r)}catch{}return r}if(!e[t].deleted)return undefined;console.warn(`${O[1]}${t}.`)},set(e,t,n,r){if((t=a(t))in e&&!e[t].deleted){const o=e[t].value;e[t].value=n;const i=e[t].shouldExports,s=e[t].shouldUpdates;for(let e=0;e<s.length;e++);for(let e=0;e<i.length;e++)i[e].bind(r)(o)}else e[t].deleted?console.warn(`${O[1]}${t}.`):e[t]=l(n,[],[]);return!0},deleteProperty(e,t){const n=(t=a(t))in e;return n&&(e[t].deleted=!0),n}}),"f"),E(this,m,"m",v).call(this,E(this,b,"f"))}get rootNode(){return E(this,b,"f")}get data(){return E(this,w,"f")}get _(){return E(this,w,"f")}get __privateData__(){return x?E(this,y,"f"):"BLOCKED IN NON-DEV MODE"}addExport(e,t){return c(E(this,y,"f")[e],t)}removeExport(e,t){return u(E(this,y,"f")[e],t)}parseTemplate(e){E(this,m,"m",v).call(this,e)}}b=new WeakMap,y=new WeakMap,w=new WeakMap,m=new WeakSet,v=function P(e){if(e instanceof Element){const t=this.data;Object.defineProperty(e,"data",{configurable:!1,enumerable:!0,get(){return t}}),Object.defineProperty(e,"_",{configurable:!1,enumerable:!0,get(){return t}});const n=e.attributes;Array.from(e.childNodes);for(let r=0;r<n.length;r++){if(n[r].name.match(/:_[a-zA-Z$_][\w$]*_:/)){const t=n[r].name.substring(2,n[r].name.length-2);t in E(this,y,"f")||(E(this,y,"f")[t]=l());const o=function(n){const r=e.getAttribute(n);e.setAttribute(this[t],r),e.removeAttribute(n)};c(E(this,y,"f")[t],o),E(this,w,"f")[t]=undefined}if(n[r].value.match(/:_[a-zA-Z$_][\w$]*_:/)){const t=n[r].value.substring(2,n[r].value.length-2),o=n[r].name;t in E(this,y,"f")||(E(this,y,"f")[t]=l());const i=function(){e.setAttribute(o,this[t])};c(E(this,y,"f")[t],i),E(this,w,"f")[t]=undefined}}for(let r=0;r<e.childNodes.length;r++)E(this,m,"m",P).call(this,e.childNodes[r])}else if(e instanceof Text){if(e.textContent){const n=[...e.textContent.matchAll(/:_[a-zA-Z$_][\w$]*_:/g)];if(n.length>0){const r=[],o=[],i=e.textContent;for(let e=0;e<n.length;e++){const t=n[e][0].substring(2,n[e][0].length-2);r.push(n[e].index),o.push(t),t in E(this,y,"f")||(E(this,y,"f")[t]=l())}r.length!=o.length&&console.error(O[0],r,o);const s=(t=o,Array.from(new Set(t))),a=function(){var t=i;for(let e=0;e<s.length;e++)t=t.replaceAll(`:_${s[e]}_:`,this[s[e]]);e.textContent=t};for(let e=0;e<s.length;e++)c(E(this,y,"f")[s[e]],a),E(this,w,"f")[s[e]]=undefined}}}else console.error(O[0],e);var t};const A={"new"(e){return new $(e)},spa:n,manifest:r,e(e,t){return o(e,t)},"debugger"(){return setInterval((()=>{}),20)}};!function N(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&N(e[Object.keys(e)[t]])}(A);const j=A;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:j})})();
//# sourceMappingURL=dynamic.min.js.map