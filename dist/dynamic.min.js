(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{register:()=>D});var n={};e.r(n),e.d(n,{getHash:()=>I,getSearch:()=>W});var r={};function o(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)[0]}function i(e,t,n,r){throw e===undefined?new Error("An error occured."):(console.error("ERROR INFO: argument",e,",type",t,",value",n,",reason",r),new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`))}function a(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function s(e){""!==e&&"string"==typeof e||i("HTML","string",e);const t=document.createElement("div");return t.innerHTML=e,function(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t}(t)}function l(e,t,n,r){null===t.parentElement&&function(e){throw new Error(e)}("cannot render by '<html>' element, since it's root of document.");var o=[];if("string"==typeof e)o=s(e);else if(e instanceof Element||e instanceof Node)o[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let s=0;s<e.length;s++)o[s]=e.item(s).cloneNode(!0);else o=e;const i=[...o].reverse(),a=t.parentElement;if(!0===r)for(let s=0;s<o.length;s++)t.append(o[s]);else if(!1===r)for(let s=0;s<i.length;s++)t.prepend(i[s]);else if(!0===n)if(t.nextSibling)for(let s=0;s<i.length;s++)a.insertBefore(i[s],t.nextSibling);else for(let s=0;s<i.length;s++)a.append(i[s]);else if(!1===n)for(let s=0;s<o.length;s++)a.insertBefore(o[s],t);else for(let s=0;s<o.length;s++)t.append(o[s]);return o}function c(e,t,n,r){const o=t.shouldExports;n.toString().match(/^\([^\(\)]*\)[\s]*=>/)&&i("func","exportFunc",n,"export function must not be an arrow function");let a=!1;for(let i=0;i<o.length;i++)if(o[i][0]===n){a=!0;break}if(a)console.warn("Duplicated function",n,"is blocked being added to data",t);else{const i=[n,r];o.push(i),n.bind(e)(i,t.value)}return o}function f(e){return"function"==typeof e.value}function u(e){return"symbol"==typeof e&&i(e.toString(),"string",e,"index of Dynamic.data must not be a Symbol"),e}e.r(r),e.d(r,{add:()=>H});const d=Object.prototype.toString;function h(e){if("object"!=typeof e&&i("input","object",e),null===e)return"null";{let t="{";const n=Object.keys(e),r=g(e);if(0==n.length)return"[object Object]"!=r?r:"{}";{const o=function(e){const t=new WeakMap;return function n(e,r){if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;{const o=t.get(e);if(o!==undefined&&-1!=r.indexOf(o))return{$ref:o};if(t.set(e,r),e instanceof Array){const t=[];for(let o=0;o<e.length;o++)t[o]=n(e[o],r+"["+o+"]");return t}{const t={},o=Object.keys(e);if(0!=o.length)for(let i=0;i<o.length;i++)t[o[i]]=n(e[o[i]],r+"["+JSON.stringify(o[i])+"]");else if("[object Object]"!=g(e))return e;return t}}}(e,"$")}(e);for(let a=0;a<n.length;a++){const s=n[a],l=o[s],c=typeof l;function f(e){t+=`${s}: ${e}`}"undefined"==c||"number"==c||"boolean"==c?f(l):"string"==c?f(`"${l}"`):"bigint"==c?f(l+"n"):"symbol"==c?f(l.toString()):"function"==c?f(g(l)):"object"==c&&f(h(l)),a<n.length-1&&(t+=", ")}return t+="}",t}}}function g(e){return"toString"in e?e.toString():d.call(e)}var b,m,p,w,y,v,k,E,$,_,A,x=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},O=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const j=["鬼片出现了！","Access to deleted property was blocked: "],M={leftBracket:"_:",rightBracket:":_"},N={leftBracket:"_-",rightBracket:"-_"},S=":",B=new RegExp(`^${M.leftBracket}[a-zA-Z$_][\\w$]*${M.rightBracket}$`),T=new RegExp(`^${N.leftBracket}[a-zA-Z$_][\\w$]*${N.rightBracket}$`),L=new RegExp(`${N.leftBracket}[a-zA-Z$_][\\w$]*${N.rightBracket}`,"g");class P{constructor(e){b.add(this),m.set(this,void 0),p.set(this,{}),w.set(this,{}),v.set(this,{}),E.set(this,new WeakMap),$.set(this,new WeakMap),_.set(this,new WeakMap),A.set(this,new MutationObserver((e=>{for(let t=0;t<e.length;t++){const n=e[t],r=n.type;"attributes"==r&&O(this,E,"f").has(n.target)?O(this,E,"f").get(n.target)(n):"characterData"==r&&O(this,$,"f").has(n.target)?O(this,$,"f").get(n.target)(n):"childList"==r&&O(this,_,"f").has(n.target)&&O(this,_,"f").get(n.target)(n)}}))),x(this,m,function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=a(e);if(t instanceof Node)return t;i("rootNode","string | Element",e,"rootNode should be a VALID #id selector")}else i("rootNode","string | Element",e,"rootNode should be a #id selector or an Element")}(e),"f"),O(this,b,"m",y).call(this),O(this,b,"m",k).call(this,O(this,m,"f")),O(this,A,"f").observe(O(this,m,"f"),{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0})}get rootNode(){return O(this,m,"f")}get data(){return O(this,w,"f")}get _(){return O(this,w,"f")}get __DEV_data__(){return O(this,p,"f")}addExport(e,t,n){return c(O(this,w,"f"),O(this,p,"f")[e],t,n)}removeExport(e,t){return function(e,t){const n=e.shouldExports;if("string"==typeof t)if("__addedByDynamic__"==t)i("func","string | exportFunc",t,"this name is reserved");else if(""==t)console.warn("Operation blocked trying to remove ALL annoymous functions. Use the function itself for argument instead.");else for(let r=0;r<n.length;r++)n[r][0].name===t&&o(n[r],n);else if("function"==typeof t)for(let r=0;r<n.length;r++)n[r][0]===t?o(n[r],n):i("func","string | exportFunc",t);return n}(O(this,p,"f")[e],t)}addMethods(){}removeMethods(){}hydrate(e){O(this,m,"f").contains(e)?O(this,b,"m",k).call(this,e):i("node",undefined,e,"the input node must be a descendant of the rootNode")}}function D(){}function W(){var e=location.search;if(""!=e){e=e.substring(1);const t={};return e.split("&").forEach((e=>{const n=e.split("=");t[n[0]]=n[1]})),t}return null}function I(){return location.hash.substring(1)}function H(){}m=new WeakMap,p=new WeakMap,w=new WeakMap,v=new WeakMap,E=new WeakMap,$=new WeakMap,_=new WeakMap,A=new WeakMap,b=new WeakSet,y=function(){x(this,w,new Proxy(O(this,p,"f"),{get(e,t,n){if((t=u(t))in e&&!e[t].deleted){let r;return f(e[t])?(r=e[t].value.bind(n)(n),e[t].value):r=e[t].value,r}if(!(t in e))return undefined;e[t].deleted?console.warn(`${j[1]}${t}.`):console.error(j[0],"get",t)},set(e,t,n,r){if((t=u(t))in e&&!e[t].deleted){const o=e[t].value;if(e[t].value=n,o!==n){const n=e[t].shouldExports,i=e[t].shouldUpdates;for(let e=0;e<i.length;e++);for(let e=0;e<n.length;e++)n[e][0].bind(r)(n[e],o)}}else t in e?e[t].deleted?console.warn(`${j[1]}${t}.`):console.error(j[0],"set",t):e[t]=function(e,t,n){const r={value:e,deleted:!1,shouldUpdates:t||[],shouldExports:n||[]};return f(r)&&(r.cache=undefined),r}(n);return!0},deleteProperty(e,t){const n=(t=u(t))in e;return n&&(e[t].deleted=!0),n}}),"f")},k=function z(e){if(e instanceof Element){const t=this.data;Object.defineProperty(e,"data",{configurable:!1,enumerable:!0,get(){return t}}),Object.defineProperty(e,"_",{configurable:!1,enumerable:!0,get(){return t}});const n=Array.from(e.attributes),r=Array.from(e.childNodes);for(let o=0;o<n.length;o++){let t=n[o].name,r=n[o].value;if(t.match(B)||t.match(T)){t.match(B)&&console.warn(`It's not rational to declare a two-way binding attribute name: ${t}, automatically treated as one-way binding. Use "${N.leftBracket}${t.substring(2,t.length-2)}${N.rightBracket}" instead.`),(r.match(B)||r.match(T))&&console.warn("Cannot set an attribute with both name and value dynamic. Dynamic will make only attribute name dynamic.");const n=t.substring(2,t.length-2),o=function(e,t){const r=this[n];if(t!==r){const n=e[1],o=n.getAttribute(t);n.removeAttribute(t),""!==r&&("string"==typeof r&&r!==r.toLowerCase()&&console.warn(`Attribute names are case insensitive, don't pass string with upper-case letters which may cause bugs: ${r}`),n.setAttribute(r,o))}};e.removeAttribute(t),n in O(this,w,"f")||(O(this,w,"f")[n]=undefined),c(O(this,w,"f"),O(this,p,"f")[n],o,e),e.setAttribute(O(this,w,"f")[n],r)}else if(r.match(B)||r.match(T)){const n=r.substring(2,r.length-2);e.removeAttribute(t),t[t.length-1]==S&&(t=t.substring(0,t.length-1));let o,i=t;("value"==i||"checked"==i)&&e instanceof HTMLInputElement&&i in e?o=function(t,r){e[i]=this[n]}:(e instanceof HTMLInputElement&&("defaultvalue"==i&&"defaultValue"in e?i="value":"defaultchecked"==i&&"defaultChecked"in e&&(i="checked")),o=function(t,r){const o=this[n];r!==o&&(null===o?e.removeAttribute(i):e.setAttribute(i,o))}),n in O(this,w,"f")||(O(this,w,"f")[n]=undefined),c(O(this,w,"f"),O(this,p,"f")[n],o,e),e.setAttribute(i,O(this,w,"f")[n]),r.match(B)&&(e instanceof HTMLInputElement?"value"==t?e.addEventListener("input",(t=>{t.target===e&&(O(this,w,"f")[n]=e.value)})):"checked"==t&&e.addEventListener("input",(t=>{t.target===e&&(O(this,w,"f")[n]=e.checked)})):O(this,E,"f").set(e,(t=>{t.attributeName===i&&e.getAttribute(t.attributeName)!==O(this,w,"f")[n]&&(O(this,w,"f")[n]=e.getAttribute(t.attributeName))})))}}for(let e=0;e<r.length;e++)O(this,b,"m",z).call(this,r[e])}else if(e instanceof Text&&e.textContent){const n=e.textContent,r=[...n.matchAll(L)];if(r.length>0){const o=[],i=[],a=e.parentNode,s=e.nextSibling;for(let e=0;e<r.length;e++){const t=r[e][0].substring(2,r[e][0].length-2);o.push(r[e].index),i.push(t),t in O(this,w,"f")||(O(this,w,"f")[t]=undefined)}const l=(t=i,Array.from(new Set(t))),f=function(e){let t=n;document.contains(e[1])||(e[1]=document.createTextNode(n),a.insertBefore(e[1],s));let r=e[1];for(let n=0;n<l.length;n++){let e=this[l[n]];"object"==typeof e&&(e=h(e)),t=t.replaceAll(`${N.leftBracket}${l[n]}${N.rightBracket}`,e)}r.textContent=t};for(let t=0;t<l.length;t++)l[t]in O(this,w,"f")||(O(this,w,"f")[l[t]]=undefined),c(O(this,w,"f"),O(this,p,"f")[l[t]],f,e)}else n.match(B)&&(e.parentElement instanceof HTMLElement||console.warn("It's no use adding a two-way binding insert to an SVGElement, but dynamic will continue anyway."))}var t};const C=clearInterval;var R;function F(e){return new P(e)}(e=>{for(let t in e)F[t]=e[t]})({template:t,spa:n,manifest:r,e(e,t){return a(e,t)},render(e){return l(e.HTML,e.element,e.insertAfter,e.append)},toHTML(e){return s(e)},hatch(e,t){return function(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let o=0;o<r.length;o++)n.insertBefore(r[o],e);return!0===t&&e.remove(),r}(e,t)},compose(){},__disableDevTools__:function(){R=setInterval((()=>{}),20),clearInterval=e=>{e!=R&&C.call(window,e)}},__enableDevTools__:function(){clearInterval=C,clearInterval(R)},constructor(){}}),function U(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&U(e[Object.keys(e)[t]])}(F);const V=F;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:V})})();
//# sourceMappingURL=dynamic.min.js.map