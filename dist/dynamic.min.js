(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{register:()=>x});var n={};e.r(n),e.d(n,{getHash:()=>O,getSearch:()=>A});var r={};function o(e,t,n,r){throw e===undefined?new Error("An error occured."):(console.error("ERROR INFO: argument",e,",type",t,",value",n,",reason",r),new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`))}function i(e){throw new Error(e)}function l(e){return Array.from(new Set(e))}function s(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function a(e){""!==e&&"string"==typeof e||o("HTML","string",e);const t=document.createElement("div");return t.innerHTML=e,function(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t}(t)}e.r(r),e.d(r,{add:()=>N});undefined&&undefined.__classPrivateFieldGet,undefined&&undefined.__classPrivateFieldSet;clearInterval;new WeakMap;const c=Function.prototype.toString;function u(e,t,n,r){const o=t.shouldExports;f(n);let i=!1;for(let l=0;l<o.length;l++)if(o[l][0]===n){i=!0;break}if(i)console.warn("Duplicated function",n,"is blocked being added to data",t);else{const i=[n,r,!1];o.push(i),n.call(e,i,t.value)}return[...o]}function f(e){c.call(e).match(/^\([^\(\)]*\)[\s]*=>/)&&o("func",undefined,e,"this function must not be an arrow function")}const d=Object.prototype.toString;function g(e){if("object"!=typeof e&&o("input","object",e),null===e)return"null";{let t="{";const n=Object.keys(e),r=h(e);if(0==n.length)return"[object Object]"!=r?r:"{}";{const i=function(e){const t=new WeakMap;return function n(e,r){if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;{const o=t.get(e);if(o!==undefined&&-1!=r.indexOf(o))return{$ref:o};if(t.set(e,r),e instanceof Array){const t=[];for(let o=0;o<e.length;o++)t[o]=n(e[o],r+"["+o+"]");return t}{const t={},o=Object.keys(e);if(0!=o.length)for(let i=0;i<o.length;i++)t[o[i]]=n(e[o[i]],r+"["+JSON.stringify(o[i])+"]");else if("[object Object]"!=h(e))return e;return t}}}(e,"$")}(e);for(let l=0;l<n.length;l++){const s=n[l],a=i[s],c=typeof a;function u(e){t+=`${s}: ${e}`}"undefined"==c||"number"==c||"boolean"==c?u(a):"string"==c?u(`"${a}"`):"bigint"==c?u(a+"n"):"symbol"==c?u(a.toString()):"function"==c?u(h(a)):"object"==c&&u(g(a)),l<n.length-1&&(t+=", ")}return t+="}",t}}}function h(e){return"toString"in e?e.toString():d.call(e)}const p={l:"_:",r:":_"},b={l:"_-",r:"-_"},m=":",y=new RegExp(`^${p.l}[a-zA-Z$_][\\w$]*${p.r}$`),v=new RegExp(`^${b.l}[a-zA-Z$_][\\w$]*${b.r}$`),$=new RegExp(`${p.l}[a-zA-Z$_][\\w$]*${p.r}`,"g"),w=new RegExp(`${b.l}[a-zA-Z$_][\\w$]*${b.r}`,"g"),E=["鬼片出现了！","",", automatically treated as one-way binding.","function","DO NOT USE "," in Dynamic instance."," is a reserved property."];function x(){}function A(){var e=location.search;if(""!=e){e=e.substring(1);const t={};return e.split("&").forEach((e=>{const n=e.split("=");t[n[0]]=n[1]})),t}return null}function O(){return location.hash.substring(1)}function N(){}const S=function(e,t){const n=function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=s(e);if(t instanceof Node)return t;o("rootNode","string | Element",e,"rootNode should be a VALID #id selector")}else o("rootNode","string | Element",e,"rootNode should be a #id selector or an Element")}(e),r={},a={rootNode:n,hydrate:O,addExport:function(){},removeExport:function(){},getExports:function(){},getDataKeys:function(){return Object.keys(r)}},c=new WeakMap,d=new WeakMap,h=new WeakMap,x=new MutationObserver((e=>{for(let t=0;t<e.length;t++){const n=e[t],r=n.type;"attributes"==r&&c.has(n.target)?c.get(n.target)(n):"characterData"==r&&d.has(n.target)?d.get(n.target)(n):"childList"==r&&h.has(n.target)&&h.get(n.target)(n)}})),A=new Proxy((function(){}),{get(e,t,n){if(t in a)return a[t];if(t in r){let e;return e=typeof r[t].value==E[3]?r[t].cache:r[t].value,e}return undefined},set(e,t,n,o){if(t in a)i(`${t}${E[6]}`);else if(t in r){const c=r[t].value;if(c!==n){r[t].value=n,s(r[t]);const u=r[t].shouldExports;for(let g=0;g<u.length;g++)u[g][0].call(o,u[g],c);for(let h=0;h<r[t].shouldUpdates.length;h++)d(r[t].shouldUpdates[h]);function d(e){if(e in r&&typeof r[e].value==E[3]){const t=r[e].cache;r[e].cache=r[e].value.call(o);const n=r[e].shouldExports;for(let e=0;e<n.length;e++)n[e][0].call(o,n[e],t);for(let o=0;o<r[e].shouldUpdates.length;o++)d(r[e].shouldUpdates[o])}}}}else r[t]=function(e,t,n){const r={value:e,shouldUpdates:t||[],shouldExports:n||[]};return"function"==typeof r.value&&(r.cache=undefined),r}(n),s(r[t]);return!0;function s(e){if(typeof n==E[3]){f(n),e.cache=n.call(o);const i=function(e){const t={double:!1,single:!1,reversed:!1},n=[];var r=0;for(let o=0;o<e.length;o++)"\\n"==e[o]&&(t.double=!1,t.single=!1),"`"!=e[o]||t.single||t.double||(t.reversed=!t.reversed),'"'!=e[o]||t.single||t.reversed||(t.double=!t.double),"'"!=e[o]||t.double||t.reversed||(t.single=!t.single),t.reversed&&"$"==e[o]&&e[o+1],e[o].match(/[\w$]/)||0==r||t.single||t.double||t.reversed||(n.push(e.substring(r,o)),r=0),t.single||t.double||t.reversed||"t"!=e[o]||"h"!=e[o+1]||"i"!=e[o+2]||"s"!=e[o+3]||"."!=e[o+4]||(r=o+5,o+=4);return l(n)}(Function.prototype.toString.call(n));for(let e=0;e<i.length;e++)i[e]in r||(o[i[e]]=undefined),-1==r[i[e]].shouldUpdates.indexOf(t)&&r[i[e]].shouldUpdates.push(t)}else delete e.cache}},deleteProperty(e,t){const n=t in r;return t in a?i(`${t}${E[6]}`):n&&delete r[t],n},apply(e,t,n){},construct(e,t,n){return{argArray:t,newTarget:n}},has(e,t){return Reflect.has(r,t)},getOwnPropertyDescriptor(e,t){return t in r?Reflect.getOwnPropertyDescriptor(r,t):Reflect.getOwnPropertyDescriptor(e,t)},ownKeys(e){return l([...Reflect.ownKeys(r),"prototype","caller","arguments","length","name"])},isExtensible(){return!0},defineProperty(){return i(`${E[4]}defineProperty${E[5]}`),!1},preventExtensions(){return i(`${E[4]}preventExtensions${E[5]}`),!1},setPrototypeOf(){return i(`${E[4]}setPrototypeOf${E[5]}`),!1}});function O(e){if(e instanceof Element){!function(e,t){for(let n in t)n in e||Object.defineProperty(e,n,t[n])}(e,{_:{configurable:!1,enumerable:!0,get(){return A}}});const t=Array.from(e.attributes),n=Array.from(e.childNodes),o=[];for(let i=0;i<t.length;i++){let n=t[i].name,l=t[i].value;const s=!!n.match(v),a=!!n.match(y),f=!!l.match(v),d=!!l.match(y),g=s||a,h=f||d;let p,$,w,x;if(a&&console.warn(`It's not rational to declare a two-way binding attribute name: ${n}${E[2]} Use "${b.l}${n.substring(2,n.length-2)}${b.r}" instead.`),g&&h&&console.warn("Cannot set an attribute with both name and value dynamic. Dynamic will make only attribute name dynamic."),g){p=n.substring(2,n.length-2);const t=Symbol(),o={[t]:function(e,t){const n=this[p];if(t!==n){const r=e[1],o=r.getAttribute(t);r.removeAttribute(t),""!==n&&("string"==typeof n&&n!==n.toLowerCase()&&console.warn(`Attribute names are case insensitive, don't pass string with upper-case letters which may cause bugs: ${n}`),r.setAttribute(n,o))}}};p in A||(A[p]=undefined),u(A,r[p],o[t],e)}else if(h){$=l.substring(2,l.length-2),w=n[n.length-1]==m?n.substring(0,n.length-1):n;let t={};("value"==w||"checked"==w)&&e instanceof HTMLInputElement&&w in e?t.func=function(t,n){const r=this[$];n!==r&&(e[w]=r)}:(x=e instanceof HTMLInputElement?"defaultvalue"==w&&"defaultValue"in e?"value":"defaultchecked"==w&&"defaultChecked"in e?"checked":w:w,t.func=function(t,n){const r=this[$];n!==r&&(null===r?e.removeAttribute(x):e.setAttribute(x,r))}),$ in A||(A[$]=undefined),u(A,r[$],t.func,e),d&&(e instanceof HTMLInputElement?"value"==n?e.addEventListener("input",(t=>{t.target===e&&(A[$]=e.value)})):"checked"==n&&e.addEventListener("input",(t=>{t.target===e&&(A[$]=e.checked)})):c.set(e,(e=>{e.attributeName===x&&e.target.getAttribute(e.attributeName)!==A[$]&&(A[$]=e.target.getAttribute(e.attributeName))})))}g?o.push([1,n,p,l]):h&&o.push([2,n,x,$])}for(let r=0;r<o.length;r++){const t=o[r];1==t[0]?(e.removeAttribute(t[1]),e.setAttribute(A[t[2]],t[3])):2==t[0]&&(t[2]===undefined?e[t[1]]=A[t[3]]:(e.removeAttribute(t[1]),e.setAttribute(t[2],A[t[3]])))}for(let e=0;e<n.length;e++)O(n[e])}else if(e instanceof Text&&e.textContent){const t=e.textContent,n=[...t.matchAll($)],o=[...t.matchAll(w),...n],i=!!t.match(y),s=!!t.match(v);if(n.length>0&&!i&&console.warn(`Two-way bindings in "${t}" cannot be used in textContent template${E[2]}`),i){e.parentElement instanceof HTMLElement||console.warn("It's no use adding a two-way binding insert to an SVGElement, but dynamic will continue anyway.");const n=t.substring(2,t.length-2),o=e.parentNode;if(1==o.childNodes.length){const t=Symbol(),i={[t]:function(){const e=this[n];if(o.textContent!==e){if(e instanceof Element||e instanceof Array&&e[0]instanceof Element){if(o.innerHTML="",e instanceof Element)o.appendChild(e);else for(let t=0;t<e.length;t++)e[t]instanceof Element?o.appendChild(e[t]):o.appendChild(document.createTextNode(g(e[t])));return}o.textContent=e}}};n in A||(A[n]=undefined),u(A,r[n],i[t],e),o.addEventListener("input",(e=>{e.target===o&&o.textContent!==A[n]&&(A[n]=o.textContent)})),e.textContent=A[n]}else console.error("The parent element of a two-way binding text node must only have this text node.")}else if(o.length>0){const n=[],i=e.parentNode,a=e.nextSibling;for(let e=0;e<o.length;e++){const t=o[e][0].substring(2,o[e][0].length-2);n.push(t),t in r||(A[t]=undefined)}const c=l(n),f=Symbol(),d={[f]:function(e){const n=this[c[0]];if((n instanceof Element||n instanceof Array&&n[0]instanceof Element)&&s)if(e[2]=!0,i.innerHTML="",n instanceof Element)i.appendChild(n);else for(let t=0;t<n.length;t++)n[t]instanceof Element?i.appendChild(n[t]):i.appendChild(document.createTextNode(g(n[t])));else{let n=t;e[2]?(i.innerHTML="",e[1]=document.createTextNode(n),i.insertBefore(e[1],a)):document.contains(e[1])||(e[1]=document.createTextNode(n),i.insertBefore(e[1],a));let r=e[1];e[2]=!1;for(let e=0;e<c.length;e++){let t=this[c[e]];"object"==typeof t&&(t=g(t)),n=n.replaceAll(`${b.l}${c[e]}${b.r}`,t).replaceAll(`${p.l}${c[e]}${p.r}`,t)}r.textContent!==n&&(r.textContent=n)}}};for(let t=0;t<c.length;t++)u(A,r[c[t]],d[f],e)}}}return O(n),x.observe(n,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),A};S.template=t,S.spa=n,S.manifest=r,S.e=s,S.render=e=>function(e,t,n,r){null===t.parentElement&&i("cannot render by '<html>' element, since it's root of document.");var o=[];if("string"==typeof e)o=a(e);else if(e instanceof Element||e instanceof Node)o[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let i=0;i<e.length;i++)o[i]=e.item(i).cloneNode(!0);else o=e;const l=[...o].reverse(),s=t.parentElement;if(!0===r)for(let i=0;i<o.length;i++)t.append(o[i]);else if(!1===r)for(let i=0;i<l.length;i++)t.prepend(l[i]);else if(!0===n)if(t.nextSibling)for(let i=0;i<l.length;i++)s.insertBefore(l[i],t.nextSibling);else for(let i=0;i<l.length;i++)s.append(l[i]);else if(!1===n)for(let i=0;i<o.length;i++)s.insertBefore(o[i],t);else for(let i=0;i<o.length;i++)t.append(o[i]);return o}(e.HTML,e.element,e.insertAfter,e.append),S.toHTML=a,S.hatch=function(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let o=0;o<r.length;o++)n.insertBefore(r[o],e);return!0===t&&e.remove(),r},S.compose=()=>{};const j=S;!function k(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&k(e[Object.keys(e)[t]])}(j);const T=j;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:T})})();
//# sourceMappingURL=dynamic.min.js.map