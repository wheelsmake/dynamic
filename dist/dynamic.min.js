(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t);var n={};e.r(n),e.d(n,{getHash:()=>k,getSearch:()=>S});var r={};function o(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)[0]}function i(e,t,n,r){throw e===undefined?new Error("An error occured."):(console.error("ERROR INFO: argument",e,",type",t,",value",n,",reason",r),new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`))}function s(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function l(e){""!==e&&"string"==typeof e||i("HTML","string",e);const t=document.createElement("div");return t.innerHTML=e,function(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t}(t)}function a(e,t,n,r){null===t.parentElement&&function(e){throw new Error(e)}("cannot render by '<html>' element, since it's root of document.");var o=[];if("string"==typeof e)o=l(e);else if(e instanceof Element||e instanceof Node)o[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let l=0;l<e.length;l++)o[l]=e.item(l).cloneNode(!0);else o=e;const i=[...o].reverse(),s=t.parentElement;if(!0===r)for(let l=0;l<o.length;l++)t.append(o[l]);else if(!1===r)for(let l=0;l<i.length;l++)t.prepend(i[l]);else if(!0===n)if(t.nextSibling)for(let l=0;l<i.length;l++)s.insertBefore(i[l],t.nextSibling);else for(let l=0;l<i.length;l++)s.append(i[l]);else if(!1===n)for(let l=0;l<o.length;l++)s.insertBefore(o[l],t);else for(let l=0;l<o.length;l++)t.append(o[l]);return o}function c(e,t){const n=e.shouldExports;return t.toString().match(/^\([^\(\)]*\)[\s]*=>/)&&i("func","exportFunc",t,"export function must not be an arrow function"),-1==n.indexOf(t)?n.push(t):console.warn("Duplicated function",t,"is blocked being added to data",e),n}function f(e){const t=new WeakMap;return function n(e,r){if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;{const o=t.get(e);if(o!==undefined&&-1!=r.indexOf(o))return{$ref:o};if(t.set(e,r),e instanceof Array){const t=[];for(let o=0;o<e.length;o++)t[o]=n(e[o],r+"["+o+"]");return t}{const t={},o=Object.keys(e);if(0!=o.length)for(let i=0;i<o.length;i++)t[o[i]]=n(e[o[i]],r+"["+JSON.stringify(o[i])+"]");else{if("[object Object]"!=g(e))return e}return t}}}(e,"$")}function u(e){return"symbol"==typeof e&&i(e.toString(),"string",e,"index of Dynamic.data must not be a Symbol"),e}e.r(r),e.d(r,{add:()=>M});const d=Object.prototype.toString;function h(e){if("object"!=typeof e&&i("input","object",e),null===e)return"null";{var t="{";const n=Object.keys(e),r=g(e);if(0==n.length)return"[object Object]"!=r?r:"{}";{const o=f(e);for(let s=0;s<n.length;s++){const l=n[s],a=o[l],c=typeof a;function u(e){t+=`${l}: ${e}`}"undefined"==c||"number"==c||"boolean"==c?u(a):"string"==c?u(`"${a}"`):"bigint"==c?u(a+"n"):"symbol"==c?u(a.toString()):"function"==c?u(g(a)):"object"==c&&u(h(a)),s<n.length-1&&(t+=", ")}return t+="}"}}}function g(e){return"toString"in e?e.toString():d.call(e)}window.advancedStringify=h,window.decycle=f;var p,b,m,v,y,w,_,E,O,j=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},$=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const x=["鬼片出现了！","Access to deleted property was blocked: "];class A{constructor(e){p.add(this),b.set(this,void 0),m.set(this,{}),v.set(this,{}),w.set(this,{}),E.set(this,new MutationObserver((e=>{for(let t=0;t<e.length;t++)e[t]}))),O.set(this,[]),j(this,b,function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=s(e);if(t instanceof Node)return t;i("rootNode","string | Element",e,"rootNode should be a VALID #id selector")}else i("rootNode","string | Element",e,"rootNode should be a #id selector or an Element")}(e),"f"),$(this,p,"m",y).call(this),$(this,p,"m",_).call(this,$(this,b,"f")),$(this,E,"f").observe($(this,b,"f"),{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0})}get rootNode(){return $(this,b,"f")}get data(){return $(this,v,"f")}get _(){return $(this,v,"f")}addExport(e,t){return c($(this,m,"f")[e],t)}removeExport(e,t){return function(e,t){const n=e.shouldExports;if("string"==typeof t)if("__addedByDynamic__"==t)i("func","string | exportFunc",t,"this name is reserved");else if(""==t)console.warn("Operation blocked trying to remove ALL annoymous functions. Use the function itself for argument instead.");else for(let r=0;r<n.length;r++)n[r].name===t&&o(n[r],n);else"function"==typeof t?o(t,n):i("func","string | exportFunc",t);return n}($(this,m,"f")[e],t)}addMethods(){}removeMethods(){}parseHTML(e){$(this,p,"m",_).call(this,e)}}function S(){var e=location.search;if(""!=e){e=e.substring(1);const t={};return e.split("&").forEach((e=>{const n=e.split("=");t[n[0]]=n[1]})),t}return null}function k(){}function M(){}b=new WeakMap,m=new WeakMap,v=new WeakMap,w=new WeakMap,E=new WeakMap,O=new WeakMap,p=new WeakSet,y=function(){j(this,v,new Proxy($(this,m,"f"),{get(e,t,n){return(t=u(t))in e&&!e[t].deleted?"function"==typeof e[t].value?e[t].value.bind(n)():e[t].value:t in e?void(e[t].deleted?console.warn(`${x[1]}${t}.`):console.error(x[0],"get",t)):undefined},set(e,t,n,r){if((t=u(t))in e&&!e[t].deleted){const o=e[t].value;e[t].value=n;const i=e[t].shouldExports,s=e[t].shouldUpdates;for(let e=0;e<s.length;e++);for(let e=0;e<i.length;e++)i[e].bind(r)(o)}else t in e?e[t].deleted?console.warn(`${x[1]}${t}.`):console.error(x[0],"set",t):e[t]=function(e,t,n){const r={value:e,deleted:!1,shouldUpdates:t||[],shouldExports:n||[]};return"function"==typeof r.value&&(r.cache=undefined),r}(n,[],[]);return!0},deleteProperty(e,t){const n=(t=u(t))in e;return n&&(e[t].deleted=!0),n}}),"f")},_=function D(e){if(e instanceof Element){const r=this.data;Object.defineProperty(e,"data",{configurable:!1,enumerable:!0,get(){return r}}),Object.defineProperty(e,"_",{configurable:!1,enumerable:!0,get(){return r}});const o=Array.from(e.attributes);Array.from(e.childNodes);for(let i=0;i<o.length;i++){if(o[i].name.match(/^:_[a-zA-Z$_][\w$]*_:$/)){const t=o[i].name.substring(2,o[i].name.length-2),n=function(n){const r=e.getAttribute(n);e.setAttribute(this[t],r),e.removeAttribute(n)};$(this,v,"f")[t]=undefined,c($(this,m,"f")[t],n),$(this,v,"f")[t]=undefined}if(o[i].value.match(/^:_[a-zA-Z$_][\w$]*_:$/)){const r=o[i].value.substring(2,o[i].value.length-2);var t,n=o[i].name;e.removeAttribute(n),":"==n[n.length-1]&&(n=n.substring(0,n.length-1)),("value"==n||"checked"==n)&&e instanceof HTMLInputElement&&n in e?t=function(){e[n]=this[r]}:(e instanceof HTMLInputElement&&("defaultvalue"==n&&"defaultValue"in e?n="value":"defaultchecked"==n&&"defaultChecked"in e&&(n="checked")),t=function(){e.setAttribute(n,this[r])}),$(this,v,"f")[r]=undefined,c($(this,m,"f")[r],t),$(this,v,"f")[r]=undefined}}for(let t=0;t<e.childNodes.length;t++)$(this,p,"m",D).call(this,e.childNodes[t])}else if(e instanceof Text){if(e.textContent){const t=[...e.textContent.matchAll(/:_[a-zA-Z$_][\w$]*_:/g)];if(t.length>0){const n=[],o=[],i=e.textContent;for(let e=0;e<t.length;e++){const r=t[e][0].substring(2,t[e][0].length-2);n.push(t[e].index),o.push(r),r in $(this,v,"f")||($(this,v,"f")[r]=undefined)}const s=(r=o,Array.from(new Set(r))),l=function(){var t=i;for(let e=0;e<s.length;e++){var n=this[s[e]];"object"==typeof n&&(n=h(n)),t=t.replaceAll(`:_${s[e]}_:`,n)}e.textContent=t};for(let e=0;e<s.length;e++)$(this,v,"f")[s[e]]=undefined,c($(this,m,"f")[s[e]],l),$(this,v,"f")[s[e]]=undefined}}}else console.error(x[0],e);var r};const N=clearInterval;var T;const P={"new"(e){return new A(e)},template:t,spa:n,manifest:r,e(e,t){return s(e,t)},render(e){return a(e.HTML,e.element,e.insertAfter,e.append)},toHTML(e){return l(e)},hatch(e,t){return function(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let o=0;o<r.length;o++)n.insertBefore(r[o],e);return!0===t&&e.remove(),r}(e,t)},compose(){},__disableDevTools__:function(){T=setInterval((()=>{}),20),clearInterval=e=>{e!=T&&N.call(window,e)}},__enableDevTools__:function(){clearInterval=N,clearInterval(T)}};!function H(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&H(e[Object.keys(e)[t]])}(P);const L=P;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:L})})();
//# sourceMappingURL=dynamic.min.js.map